; PlatformIO Project Configuration File
; ELEGOO Smart Robot Car Kit V4.0 - Dual-MCU Architecture
;
; Board: Arduino Uno R3 (Main Controller)
; MCU: ATmega328P (2KB SRAM - Memory Critical!)
; Communication: Serial to ESP32-WROVER-CAM

[platformio]
default_envs = arduino_uno

; ========================================
; Arduino Uno R3 - Main Robot Controller
; ========================================
[env:arduino_uno]
platform = atmelavr
board = uno
framework = arduino

; Source directory (non-standard Arduino IDE structure)
src_dir = SmartRobotCarV4.0_V0_20210104/SmartRobotCarV4.0_V0_20210104

; Serial Monitor Configuration
monitor_speed = 9600
monitor_port = /dev/cu.usbmodem00001

; Upload Configuration
upload_port = /dev/cu.usbmodem00001
upload_speed = 115200

; Build Flags
build_flags =
    -DDEBUG=0                       ; Disable debug for now (code has syntax issues with DEBUG=1)
    -Os                             ; Optimize for size (critical for 2KB SRAM!)
    -ffunction-sections             ; Place each function in its own section
    -fdata-sections                 ; Place each data item in its own section
    -Wl,--gc-sections              ; Enable garbage collection of unused sections
    -w                              ; Suppress warnings

; Library Dependencies
lib_deps =
    fastled/FastLED @ 3.6.0
    arduino-libraries/Servo @ ^1.2.0

; Monitor Filters (optional)
monitor_filters =
    default
    time

; Memory Analysis
check_tool = cppcheck
check_flags =
    --enable=all
    --suppress=missingIncludeSystem